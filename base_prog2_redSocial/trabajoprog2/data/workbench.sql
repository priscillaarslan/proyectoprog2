CREATE SCHEMA redSocial;
USE redSocial;

CREATE TABLE usuarios (
id INT UNSIGNED PRIMARY KEY NOT NULL AUTO_INCREMENT,
email VARCHAR(255) NOT NULL UNIQUE,
username VARCHAR(255) NOT NULL UNIQUE, 
foto VARCHAR(255) NOT NULL, 
password VARCHAR (255) NOT NULL,
fechaDeNacimiento DATE NOT NULL, 
DNI VARCHAR(9) NOT NULL,
createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, 
deletedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

CREATE TABLE posteos (
id INT UNSIGNED PRIMARY KEY NOT NULL AUTO_INCREMENT,
foto VARCHAR(255) NOT NULL,
texto VARCHAR(255) NOT NULL,   
usuario_id INT UNSIGNED,
createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, 
deletedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
FOREIGN KEY (usuario_id) REFERENCES usuarios(id)  ON DELETE CASCADE
);

CREATE TABLE comentarios (
id INT UNSIGNED PRIMARY KEY NOT NULL AUTO_INCREMENT,
texto VARCHAR(255) NOT NULL,
createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, 
deletedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
usuario_id INT UNSIGNED,
FOREIGN KEY (usuario_id) REFERENCES usuarios (id)  ON DELETE CASCADE,
posteo_id INT UNSIGNED,
FOREIGN KEY (posteo_id) REFERENCES posteos (id)  ON DELETE CASCADE

);      

create table seguidores(
  id int unsigned primary key auto_increment,
  seguido_id int unsigned not null,
  seguidor_id int unsigned not null,
  FOREIGN KEY (seguido_id) references usuarios(id) ON DELETE CASCADE,
  FOREIGN KEY (seguidor_id) references usuarios(id) ON DELETE CASCADE,
  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);




